<!DOCTYPE html>
<html>
    <head>
        <title>English Intake Form</title>
        <!--<src = "scripts/signature.js"></script>-->
       <!--## Validation for radio or text functions, may include many options by referencing ID and using or (||) or and (&&)
           <script type="text/javascript"> 
        function validate(){
            var radio = document.getElementById('fulltime').checked;
            var radio2 = document.getElementById('parttime').checked;
            if((fulltime=="") && (parttime =="")){
                alert('Please check at least one option.');
                return false;
            }
            else{
                return true;
            }
        }
    </script>-->
    <!--validation of text can be as simple as used below in first name adding required to the end <input type = "text" name="firstname" required>-->

    </head>
    <body onload="init()">
        <h1>English Patient Intake Form</h1>
        <p>
            
            <fieldset>
                <form name=english-intake onsubmit="return validate()" action= "Liability-Waver.html" method = "post">
                <legend> Personal Information:</legend>
                    First Name:
                    <input type = "text" name = "firstname" required><br>
                    Last Name:
                    <input type = "text" name = "lastname" required><br>
                    Email:
                    <input type = "text" name = "Email" required><br>
                    Phone Number:
                    <input type = "text" name = "Phone" required><br>
                    Date of Birth:
                    <input type = "text" name = "DOB" required><br>
                    Age:
                    <input type = "text" name = "age" required><br>
                    Height:
                    <input type = "text" name = "height" required><br>
                    Weight:
                    <input type = "text" name = "weight" required><br>
                    Gender:
                    <input type = "radio" name = "gender" value = "male"> Male<br>
                    <input type = "radio" name = "gender" value = "female"> Female<br>
                    Do you currently have insurance?:
                    <input type = "text" name = "insurancestatus" required><br>
            </fieldset>

            <fieldset>
                <legend>Occupation Status</legend>
                    Check your current occupational status<br>
                    Full Time<input type = "radio" Name = "occupationstatus" value = "fulltime">
                    Part-Time<input type = "radio" Name = "occupationstatus" value = "parttime">
                    Student<input type = "radio" Name = "occupationstatus" value = "student" >
                    Retired<input type = "radio" Name = "occupationstatus" value = "retired">
                    Not employed<input type = "radio" Name = "occupationstatus" value = "notemployed"><br>
                    Occupation:<br>
                    <input type = "text" name = "occupation"><br>
                    Occupation Requirements:(check all that apply)<br>
                    Repetitive Motions<input type = "radio" Name = "occupationrequirements" value = "repetitivemotion"> 
                    Walking<input type = "radio" Name = "occupationrequirements" value = "walking"> 
                    Lifting<input type = "radio" Name = "occupationrequirements" value = "lifting">
                    Kneeling <input type = "radio" Name = "occupationrequirements" value = "kneeling">
                    Sitting<input type = "radio" Name = "occupationrequirements" value = "sitting"> 
                    Standing<input type = "radio" Name = "occupationrequirements" value = "standing">
                    Carrying<input type = "radio" Name = "occupationrequirements" value = "carrying">
                    Other<input type = "radio" Name = "occupationrequirements" value = "other"><br>
                    If other, please explain:
                    <input type = "text" Name = occupationrequirementstext><br>
            </fieldset>

             <fieldset>
                <legend> Symptoms/Pain:</legend>
        
                    Why do you seek physical therapy?<br>
                    <input type= "text" name = "reasonforPT" required><br>
                    When did your symptoms start? (Month and Year)<br>
                    <input type = "month" name = "startofsxs"required><br>
                    Was there an injury?<br>
                    <input type = "radio" name = "injury" value = "injuryyes" > Yes<br>
                    <input type = "radio" name = "injury" value = "injuryno" > No<br>
                    Were you referred to physical therapy?<br>
                    <input type = "radio" name = "referred" value = "referredyes"> Yes<br>
                    <input type = "radio" name = "referred" value = "referredno"> No<br>
                    If yes, who referred you to physical therapy?<br>
                    <input type = "text" name = "referralsourcetext" ><br>
                    Have you had prior treatement for your current symptoms?<br>
                    <input type = "radio" name = "priortreatment" value = "yes"> Yes<br>
                    <input type = "radio" name = "priortreatment" value = "no"> No<br>
                    If yes, when was your last visit?<br>
                    <input type = "month" name = "lastprovidervisit"><br>
                    Are your symptoms <br>
                    <input type = "radio" Name = "symptoms" value = "worse"> Getting worse
                    <input type = "radio" Name = "symptoms" value = "improving"> Getting Better
                    <input type = "radio" Name = "symptoms" value = "same"> Staying the Same<br>
                    Which activities are limited by your symptoms?<br>
                    Standing<input type = "radio" Name = "activitylimitations" value = "standing"> 
                    Walking<input type = "radio" Name = "activitylimitations" value = "walking"> 
                    Working<input type = "radio" Name = "activitylimitations" value = "work">
                    Sleeping <input type = "radio" Name = "activitylimitations" value = "sleeping">
                    Lifting<input type = "radio" Name = "activitylimitations" value = "lifting"> 
                    Sitting<input type = "radio" Name = "activitylimitations" value = "sitting">
                    Exercise<input type = "radio" Name = "activitylimitations" value = "exercise">
                    Housework<input type = "radio" Name = "activitylimitations" value = "housework">
                    Other<input type = "radio" Name = "activitylimitations" value = "other"><br>
                    If other, please explain:<br>
                    <input type = "text" name = "activitylimitations"><br>
                    Does anything improve your symptoms?<br>
                    <input type ="text" name = "sximprovement"><br>
                    Check the box if you have had any recent testing <br>
                    <input type = "radio" Name = "Imaging" value = "mri"> MRI
                    <input type = "radio" Name = "Imaging" value = "ct"> CT
                    <input type = "radio" Name = "Imaging" value = "xr"> X-ray
                    <input type = "radio" Name = "Imaging" value = "other"> Other<br>
                    If other, please describe: <input type ="text" name = "imaging"><br>
                    What are your primary complaints?<br>
                        <input type = "radio" Name = "Primarycomplaints" value = "stiffness"> Stiffness<br>
                        <input type = "radio" Name = "Primarycomplaints" value = "spasm"> Muscle Spasm<br>
                        <input type = "radio" Name = "Primarycomplaints" value = "instability"> Instability<br>
                        <input type = "radio" Name = "Primarycomplaints" value = "weakness"> Weakness<br>
                        <input type = "radio" Name = "Primarycomplaints" value = "Numbness"> Numbness<br>
                        <input type = "radio" Name = "Primarycomplaints" value = "Swelling"> Swelling<br>
                        <input type = "radio" Name = "Primarycomplaints" value = "Pain"> Pain<br>
                        <input type = "radio" Name = "Primarycomplaints" value = "Poorbalance"> Poor Balance<br>
                        <input type = "radio" Name = "Primarycomplaints" value = "Other"> Other<br>
                        If other, please explain:<input type ="text" name = "Primarycomplaints"><br>
             
                    Have you ever had surgery?<br>
                    <input type = "radio" name = "priorsurgery" value = "yes"> Yes<br>
                    <input type = "radio" name = "priorsurgery" value = "no"> No<br>
                    If yes, please describe: <input type ="text" name = "priorsurgery"><br>
                </fieldset>

                <fieldset>
                    <legend>Current Complaints:</legend>
                        What is your pain level<br>
                        At Worst: <div class="slidecontainer">
                            <input type = "range" min = "1" max = "10" value = 5 id = "worstpn"><br>
                        At Best: <div class="slidecontainer">
                            <input type = "range" min = "1" max = "10" value = 5 id = "bestpn"><br>
                        Right Now: <div class="slidecontainer">
                            <input type = "range" min = "1" max = "10" value = 5 id = "currentpn"><br>
                        </div>
                        
                        Please mark the location of your sxs:<br>
                        <img src = "BodyChart.jpg" alt = "Body Chart" usemap = "BodyChart">
                        <map name="BodyChart">
           <!-- Figure out how to allow someone to circle or put an X through different parts of picture-->                
                            <area shape="rect" coords="1,2,3,4" alt="Arm" href="BodyChart.jpg">
                            <area shape="rect" coords="1,20,30,40" alt="Leg" href="BodyChart.jpg">
                            <area shape="circle" coords="1,2,15" alt="Coffee" href="BodyChart.jpg">
                          </map><br>

                          Is your pain worse at a certain time of day?
                          Yes <input type = "radio" Name = "worsetimeofday" value = "yes">
                          No <input type = "radio" Name = "worsetimeofday" value = "no"><br>
                          If yes, 
                          Morning <input type = "radio" Name = "worsttimeofday" value = "morning"> 
                          Night <input type = "radio" Name = "worsttimeofday" value = "night">
                          As day progresses <input type = "radio" Name = "worsttimeofday" value = "asdayprogresses"> 
                          Other <input type = "radio" Name = "worsttimeofday" value = "other"><br>
                          If other, explain:
                          <input type = "worsttimeofday" name = "worsttimeofdaytext"><br>
                          What words best describe your pain?<br>
                          <input type = "radio" Name = "sxsdescription" value = "Sharp"> Sharp<br>
                          <input type = "radio" Name = "sxsdescription" value = "Throbbing"> Throbbing<br>
                          <input type = "radio" Name = "sxsdescription" value = "aching"> Aching<br>
                          <input type = "radio" Name = "sxsdescription" value = "Burning"> Burning<br>
                          <input type = "radio" Name = "sxsdescription" value = "Deep"> Deep<br>
                          <input type = "radio" Name = "sxsdescription" value = "Stinging"> Stinging<br>
                          <input type = "radio" Name = "sxsdescription" value = "Constant"> Constant<br>
                          <input type = "radio" Name = "sxsdescription" value = "ComeandGo"> Comes and Goes<br>
                          <input type = "radio" Name = "sxsdescription" value = "Other"> Other<br>
                          If other, please explain:<input type ="text" name = "sxsdescription"><br>
            
                </fieldset>

                <fieldset>
                    <legend>Medical/Surgical History:</legend>
                    <h6>(Check if you have the following conditions)</h6>
                        Cardipulmonary:<br>
                        <input type = "radio" Name = "hypertension" value = "hypertension"> High Blood Pressure<br>
                        <input type = "radio" Name = "heartdisease" value = "heartdisease"> Heart Disease<br>
                        <input type = "radio" Name = "Smoking" value = "Smoking"> Smoking -
                        How many packs/day? 
                        <select>
                            <option value="lessthan1"><1</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6+">6+</option>
                              </select><br>
                         <input type = "radio" Name = "cardipulmonary" value = "stroke"> History of Stroke?<br>
                         <input type = "radio" Name = "cardipulmonary" value = "highcholesterol"> High Cholesterol<br>
                         <input type = "radio" Name = "cardipulmonary" value = "Anemia"> Anemia<br>
                         <input type = "radio" Name = "cardipulmonary" value = "bleedingdisorder"> Bleeding Disorder<br>
                         <input type = "radio" Name = "cardipulmonary" value = "noCVD"> None<br>
                        
                         Neuromuscular/Musculoskeletal:<br>
                         <input type = "radio" Name = "NeuroMSK" value = "headaches"> Severe Headaches<br>
                         <input type = "radio" Name = "NeuroMSK" value = "Cervicalspinedisorder"> Cervical Spine Disorder<br>
                         <input type = "radio" Name = "NeuroMSK" value = "Lspinedisorder"> Lumbar Spine Disorder<br>
                         <input type = "radio" Name = "NeuroMSK" value = "osteoporosis"> Osteoporosis<br>
                         <input type = "radio" Name = "NeuroMSK" value = "pregnant"> Pregnant - 
                         # of weeks? <input type = "text" name = "NeuroMSKweekspregnant"><br>
                         <input type = "radio" Name = "NeuroMSK" value = "fractures"> Fracture<br>
                         <input type = "radio" Name = "NeuroMSK" value = "nerveinjury"> Nerve injury<br>
                         
                         Endocrine/Other:<br>
                         <input type = "radio" Name = "endocrine" value = "diabetes"> Diabetes<br>
                         <input type = "radio" Name = "endocrine" value = "alcohol/drugs"> Alcohol or drug abuse<br>
                         <input type = "radio" Name = "endocrine" value = "depression"> Depression<br>
                         <input type = "radio" Name = "endocrine" value = "kidneydisease"> Kidney Disease<br>
                         <input type = "radio" Name = "endocrine" value = "thyroiddisease"> Thyroid Disease<br>
                         <input type = "radio" Name = "endocrine" value = "stomach/bowel"> Stomach/Bowel Disease<br>
                         <input type = "radio" Name = "endocrine" value = "mentalhealth"> Mental Health<br>

                         Medications: (list all)
                         <input type ="text" name = "medications"><br>
                         Medication Allergies:
                         <input type ="text" name = "medicationallergies"><br>
                         What would you like to accomplish with physical therapy?
                         <input type ="text" name = "PTgoals"><br>
                         How do you prefer to get physical therapy information?<br>
                         <input type = "radio" Name = "preferedinfoformat" value = "Written"> Written<br>
                         <input type = "radio" Name = "preferedinfoformat" value = "Verbal"> Verbal<br>
                         <input type = "radio" Name = "preferedinfoformat" value = "Demonstration"> Demonstration<br>  
                         Additional Comments: 
                         <input type ="text" name = "preferedinfoformatComments"><br> 
                        <fieldset>

                        <legend>I understand that I have the right to terminate any or all parts of my evaluation at any time and that I am responsible for notifying my evaluator of any and 
                        and all changes in my symptoms as they occur. I acknowledge that all information provided on this evaluation is accurate and completed to the best
                        of my abilities. </legend>
                        <!--Signature box: https://zipso.net/a-simple-touchscreen-sketchpad-using-javascript-and-html5/-->
                        <!--TODO: very jittery, need to smooth out the signature
                        
                        ## Resource https://github.com/szimek/signature_pad/blob/gh-pages/js/app.js-->
                         
                        
                        <canvas id="sketchpad" height="200" width="500" style="margin: 0px 0px 0px 0px;  border-style: solid; border-width: 1px; border-color: #bbbbbb #dbdfe6 #e3e9ef #e2e3ea; -webkit-border-radius: 1px; -moz-border-radius: 1px; -o-border-radius: 1px; border-radius: 1px; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-color: #FFFFFF;">
                        </canvas>
                        <br/>
                        <input type="submit" value="Clear Sketchpad" onclick="clearCanvas(canvas,ctx);">
                </fieldset>
                <input type = "submit", value = "GOOOO"> 
            </form>
        </p>

        <script type="text/javascript">
            // Variables for referencing the canvas and 2dcanvas context
            var canvas,ctx;
        
            // Variables to keep track of the mouse position and left-button status 
            var mouseX,mouseY,mouseDown=0;
        
            // Variables to keep track of the touch position
            var touchX,touchY;
        
            // Draws a dot at a specific position on the supplied canvas name
            // Parameters are: A canvas context, the x position, the y position, the size of the dot
            function drawDot(ctx,x,y,size) {
                // Let's use black by setting RGB values to 0, and 255 alpha (completely opaque)
                r=0; g=0; b=0; a=255;
        
                // Select a fill style
                ctx.fillStyle = "rgba("+r+","+g+","+b+","+(a/255)+")";
        
                // Draw a filled circle
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI*2, true); 
                ctx.closePath();
                ctx.fill();
            } 
        
            // Clear the canvas context using the canvas width and height
            function clearCanvas(canvas,ctx) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
        
            // Keep track of the mouse button being pressed and draw a dot at current location
            function sketchpad_mouseDown() {
                mouseDown=1;
                drawDot(ctx,mouseX,mouseY,5);
            }
        
            // Keep track of the mouse button being released
            function sketchpad_mouseUp() {
                mouseDown=0;
            }
        
            // Keep track of the mouse position and draw a dot if mouse button is currently pressed
            function sketchpad_mouseMove(e) { 
                // Update the mouse co-ordinates when moved
                getMousePos(e);
        
                // Draw a dot if the mouse button is currently being pressed
                if (mouseDown==1) {
                    drawDot(ctx,mouseX,mouseY,5);
                }
            }
        
            // Get the current mouse position relative to the top-left of the canvas
            function getMousePos(e) {
                if (!e)
                    var e = event;
        
                if (e.offsetX) {
                    mouseX = e.offsetX;
                    mouseY = e.offsetY;
                }
                else if (e.layerX) {
                    mouseX = e.layerX;
                    mouseY = e.layerY;
                }
             }
        
            // Draw something when a touch start is detected
            function sketchpad_touchStart() {
                // Update the touch co-ordinates
                getTouchPos();
        
                drawDot(ctx,touchX,touchY,12);
        
                // Prevents an additional mousedown event being triggered
                event.preventDefault();
            }
        
            // Draw something and prevent the default scrolling when touch movement is detected
            function sketchpad_touchMove(e) { 
                // Update the touch co-ordinates
                getTouchPos(e);
        
                // During a touchmove event, unlike a mousemove event, we don't need to check if the touch is engaged, since there will always be contact with the screen by definition.
                drawDot(ctx,touchX,touchY,12); 
        
                // Prevent a scrolling action as a result of this touchmove triggering.
                event.preventDefault();
            }
        
            // Get the touch position relative to the top-left of the canvas
            // When we get the raw values of pageX and pageY below, they take into account the scrolling on the page
            // but not the position relative to our target div. We'll adjust them using "target.offsetLeft" and
            // "target.offsetTop" to get the correct values in relation to the top left of the canvas.
            function getTouchPos(e) {
                if (!e)
                    var e = event;
        
                if(e.touches) {
                    if (e.touches.length == 1) { // Only deal with one finger
                        var touch = e.touches[0]; // Get the information for finger #1
                        touchX=touch.pageX-touch.target.offsetLeft;
                        touchY=touch.pageY-touch.target.offsetTop;
                    }
                }
            }
        
        
            // Set-up the canvas and add our event handlers after the page has loaded
            function init() {
                // Get the specific canvas element from the HTML document
                canvas = document.getElementById('sketchpad');
        
                // If the browser supports the canvas tag, get the 2d drawing context for this canvas
                if (canvas.getContext)
                    ctx = canvas.getContext('2d');
        
                // Check that we have a valid context to draw on/with before adding event handlers
                if (ctx) {
                    // React to mouse events on the canvas, and mouseup on the entire document
                    canvas.addEventListener('mousedown', sketchpad_mouseDown, false);
                    canvas.addEventListener('mousemove', sketchpad_mouseMove, false);
                    window.addEventListener('mouseup', sketchpad_mouseUp, false);
        
                    // React to touch events on the canvas
                    canvas.addEventListener('touchstart', sketchpad_touchStart, false);
                    canvas.addEventListener('touchmove', sketchpad_touchMove, false);
                }
            }
 
 
 
 
 
 
 // Some smoothing ideashttp://perfectionkills.com/exploring-canvas-drawing-techniques

                function midPointBtw(p1, p2) {
                return {
                    x: p1.x + (p2.x - p1.x) / 2,
                    y: p1.y + (p2.y - p1.y) / 2
                };
                }

                var el = document.getElementById('c');
                var ctx = el.getContext('2d');

                ctx.lineWidth = 10;
                ctx.lineJoin = ctx.lineCap = 'round';

                var isDrawing, points = [ ];

                el.onmousedown = function(e) {
                isDrawing = true;
                points.push({ x: e.clientX, y: e.clientY });
                };

                el.onmousemove = function(e) {
                if (!isDrawing) return;
                
                points.push({ x: e.clientX, y: e.clientY });

                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                
                var p1 = points[0];
                var p2 = points[1];
                
                ctx.beginPath();
                ctx.moveTo(p1.x, p1.y);
                console.log(points);

                for (var i = 1, len = points.length; i < len; i++) {
                    // we pick the point between pi+1 & pi+2 as the
                    // end point and p1 as our control point
                    var midPoint = midPointBtw(p1, p2);
                    ctx.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);
                    p1 = points[i];
                    p2 = points[i+1];
                }
                // Draw last line as a straight line while
                // we wait for the next point to be able to calculate
                // the bezier control point
                ctx.lineTo(p1.x, p1.y);
                ctx.stroke();
                };

                el.onmouseup = function() {
                isDrawing = false;
                points.length = 0;
                };
                

   //ways to save signature as png or jpg//
    var savePNGButton = wrapper.querySelector("[data-action=save-png]");
    var saveJPGButton = wrapper.querySelector("[data-action=save-jpg]");
                 savePNGButton.addEventListener("click", function (event) {
                if (signaturePad.isEmpty()) {
                    alert("Please provide a signature first.");
                } else {
                    var dataURL = signaturePad.toDataURL();
                    download(dataURL, "signature.png");
                }
                });

                saveJPGButton.addEventListener("click", function (event) {
                if (signaturePad.isEmpty()) {
                    alert("Please provide a signature first.");
                } else {
                    var dataURL = signaturePad.toDataURL("image/jpeg");
                    download(dataURL, "signature.jpg");
                }
                });
        </script>
    -->
        
    </body>
</html>